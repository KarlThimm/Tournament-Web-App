<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <title>Karl Tournament Website</title>

    <!-- update the version number as needed -->
    <script defer src="/__/firebase/10.4.0/firebase-app-compat.js"></script>
    <!-- include only the Firebase features as you need -->
    <script defer src="/__/firebase/10.4.0/firebase-auth-compat.js"></script>
    <script defer src="/__/firebase/10.4.0/firebase-database-compat.js"></script>
    <script defer src="/__/firebase/10.4.0/firebase-firestore-compat.js"></script>
    <script defer src="/__/firebase/10.4.0/firebase-functions-compat.js"></script>
    <script defer src="/__/firebase/10.4.0/firebase-messaging-compat.js"></script>
    <script defer src="/__/firebase/10.4.0/firebase-storage-compat.js"></script>
    <script defer src="/__/firebase/10.4.0/firebase-analytics-compat.js"></script>
    <script defer src="/__/firebase/10.4.0/firebase-remote-config-compat.js"></script>
    <script defer src="/__/firebase/10.4.0/firebase-performance-compat.js"></script>
    <!-- 
      initialize the SDK after all desired features are loaded, set useEmulator to false
      to avoid connecting the SDK to running emulators.
    -->
    <script defer src="/__/firebase/init.js?useEmulator=true"></script>

  </head>
  <body> 
    <h1>Login</h1>
    <form id="loginForm">
        <label for="email">Email:</label>
        <input type="email" id="email" required><br><br>
        <label for="password">Password:</label>
        <input type="password" id="password" required><br><br>
        <button type="submit">Login</button>
        <button id="goToResetPage">Reset Password</button> 
   </form>
    <h1>Sign Up If You Do Not Have An Account</h1>
    <form id="signupForm">
      <label for="signupEmail">Email:</label>
      <input type="email" id="signupEmail" required><br><br>
      <label for="signupPassword">Password:</label>
      <input type="password" id="signupPassword" required><br><br>
      <button type="submit">Sign Up</button>
    </form>
 <div class="message-box">
      <h2>CTF!!!</h2>
      <p>The flag is a security misconfiguration with the database.</p>
      <button onclick="toggleHint(1)">Hint 1</button>
      <button onclick="toggleHint(2)">Hint 2</button>
      <p id="hint1" style="display: none;">What is the default firebase realtime database url?</p>
      <p id="hint2" style="display: none;">Cough Cough (JSON) Cough Cough</p>
</div>

<div class="flag-input">
  <h2>Enter Flag:</h2>
  <input type="text" id="flag" placeholder="Enter flag...">
  <button id="submitButton">Submit</button> <!-- Change: Use an ID for the button -->
</div>

<script>
  function checkFlag() {
    const enteredFlag = document.getElementById('flag').value;
    const correctFlag = 'karl{go0d_stuf1_y0u_g01_1t}';

    if (enteredFlag === correctFlag) {
      alert('Correct!');
    } else {
      alert('Wrong!');
    }
  }

  document.addEventListener('DOMContentLoaded', function() {
    const submitButton = document.getElementById('submitButton');
    submitButton.addEventListener('click', checkFlag);
  });
</script>

<script>
  function toggleHint(hintNumber) {
    if (hintNumber === 1) {
      var hint1 = document.getElementById("hint1");
      hint1.style.display = hint1.style.display === "none" ? "block" : "none";
    } else if (hintNumber === 2) {
      var hint2 = document.getElementById("hint2");
      hint2.style.display = hint2.style.display === "none" ? "block" : "none";
    }
  }
</script>

      <script type="module">
  // Import the functions you need from the SDKs you need
  import { initializeApp } from "https://www.gstatic.com/firebasejs/10.4.0/firebase-app.js";
  import { getAnalytics } from "https://www.gstatic.com/firebasejs/10.4.0/firebase-analytics.js";
  // Your web app's Firebase configuration
  // For Firebase JS SDK v7.20.0 and later, measurementId is optional
  const firebaseConfig = {
    apiKey: "AIzaSyDPS3Y7K9MS49oM-36cgAH_sDhEL-MUX88",
    authDomain: "tournamentwebsite-28171.firebaseapp.com",
    projectId: "tournamentwebsite-28171",
    storageBucket: "tournamentwebsite-28171.appspot.com",
    messagingSenderId: "429418469412",
    appId: "1:429418469412:web:6ef39bee15f8c5fda0a0b1",
    measurementId: "G-ZZ6BGH5QVR"
  };
  const app = initializeApp(firebaseConfig);
  const analytics = getAnalytics(app);
  import { getAuth, signInWithEmailAndPassword, createUserWithEmailAndPassword } from "https://www.gstatic.com/firebasejs/10.4.0/firebase-auth.js";

  document.addEventListener('DOMContentLoaded', function() {
  const loginForm = document.getElementById('loginForm');

  loginForm.addEventListener('submit', (e) => {
    e.preventDefault();

    const email = document.getElementById('email').value;
    const password = document.getElementById('password').value;

    const auth = getAuth(); // Use getAuth here to get the authentication service

    signInWithEmailAndPassword(auth, email, password)
      .then(() => {
        window.location.href = 'user.html';  // Redirect to user-specific page
      })
      .catch((error) => {
        console.error('Error logging in:', error.message);
      });
  });
  signupForm.addEventListener('submit', (e) => {
          e.preventDefault();

          const email = document.getElementById('signupEmail').value;
          const password = document.getElementById('signupPassword').value;

          const auth = getAuth(); // Use getAuth here to get the authentication service

          createUserWithEmailAndPassword(auth, email, password)
            .then(() => {
              console.log('User created successfully');
            })
            .catch((error) => {
              console.error('Error creating user:', error.message);
            });
        });
}); 
  document.addEventListener('DOMContentLoaded', function() {
  const goToResetPageButton = document.getElementById('goToResetPage');

  goToResetPageButton.addEventListener('click', function() {
    window.location.href = 'reset.html';
  });
});

  </script>
   <style>
     body {
  font-family: Arial, sans-serif;
  background-color: #f5f5f5;
  display: flex;
  justify-content: center;
  align-items: center;
  height: 100vh;
  margin: 0;
  flex-direction: column; /* Added to stack elements vertically */
}

.container {
  background-color: #ffffff;
  border: 1px solid #ccc;
  border-radius: 8px;
  padding: 20px;
  max-width: 400px;
  width: 100%;
  box-shadow: 0px 4px 6px rgba(0, 0, 0, 0.1);
}

h1 {
  text-align: center;
}

form {
  margin-bottom: 20px;
}

label {
  display: block;
  font-weight: bold;
  margin-bottom: 6px;
}

input {
  width: 100%;
  padding: 8px;
  margin-bottom: 12px;
  border: 1px solid #ccc;
  border-radius: 4px;
  box-sizing: border-box;
}

button {
  width: 100%;
  padding: 10px 20px;
  background-color: #007bff;
  color: #fff;
  border: none;
  border-radius: 4px;
  cursor: pointer;
  font-size: 16px;
}

button:hover {
  background-color: #0056b3;
}

.message-box {
        background-color: #ffeeba;
        border: 1px solid #ffc107;
        border-radius: 4px;
        padding: 10px;
        margin-top: 20px;
        text-align: center;
      }

.message-box h2 {
    margin-top: 0;
      }

   </style>
  </body>
</html>
